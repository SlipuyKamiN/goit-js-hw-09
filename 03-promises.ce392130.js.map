{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACXC,MAAOC,SAASC,cAAc,kBAC9BC,KAAMF,SAASC,cAAc,iBAC7BE,OAAQH,SAASC,cAAc,mBAC/BG,UAAWJ,SAASC,cAAc,WAGpC,IAAII,EAAW,EACXC,EAAQ,EACRC,EAAO,EACPC,EAAS,EACTC,EAAa,KAEjB,SAASC,EAAcC,EAAUC,GAC/B,MAAMC,EAAgBC,KAAKC,SAAW,GACtC,OAAO,IAAIC,SAAQ,CAACC,EAASC,KACvBL,EACFI,EAAQ,CAAEE,SAAAR,EAAUZ,MAAAa,IAEpBM,EAAO,CAAEC,SAAAR,EAAUZ,MAAAa,GAAQ,G,CA+CjCd,EAAKM,UAAUgB,iBAAiB,SA1CPC,IACvBA,EAAMC,iBACNhB,EAAQiB,OAAOzB,EAAKC,MAAMyB,OAC1BjB,EAAOgB,OAAOzB,EAAKI,KAAKsB,OACxBhB,EAASe,OAAOzB,EAAKK,OAAOqB,OACxBhB,GAAU,GAAKF,EAAQ,GAAKC,EAAO,EACrCkB,EAAA7B,GAAS8B,OAAOC,QAAQ,uCAG1BtB,EAAW,EAEXuB,YAAW,KACTlB,EAAcL,EAAUC,GACrBuB,MAAK,EAAGV,SAAAW,EAAU/B,MAAAgC,MACjBN,EAAA7B,GAAS8B,OAAOM,QAAQ,sBAAsBF,QAAeC,MAAU,IAExEE,OAAM,EAAGd,SAAAe,EAAUnC,MAAAoC,MAClBV,EAAA7B,GAAS8B,OAAOC,QAAQ,qBAAqBO,QAAeC,MAAU,IAE1E1B,EAAa2B,aAAY,KACnB/B,IAAaG,GAIjBH,GAAY,EACZC,GAASC,EAETG,EAAcL,EAAUC,GACrBuB,MAAK,EAAGV,SAAAkB,EAAUtC,MAAAuC,MACjBb,EAAA7B,GAAS8B,OAAOM,QACd,sBAAsBK,QAAeC,MACtC,IAEFL,OAAM,EAAGd,SAAAoB,EAAUxC,MAAAyC,MAClBf,EAAA7B,GAAS8B,OAAOC,QACd,qBAAqBY,QAAeC,MACrC,KAfHC,cAAchC,EAgBZ,GACHF,EAAK,GACPD,GAAM","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst refs = {\n  delay: document.querySelector('[name=\"delay\"]'),\n  step: document.querySelector('[name=\"step\"]'),\n  amount: document.querySelector('[name=\"amount\"]'),\n  createBtn: document.querySelector('button'),\n};\n\nlet position = 0;\nlet delay = 0;\nlet step = 0;\nlet amount = 0;\nlet intervalId = null;\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((resolve, reject) => {\n    if (shouldResolve) {\n      resolve({ position, delay });\n    } else {\n      reject({ position, delay });\n    }\n  });\n}\n\nconst onCreateBtnClick = event => {\n  event.preventDefault();\n  delay = Number(refs.delay.value);\n  step = Number(refs.step.value);\n  amount = Number(refs.amount.value);\n  if (amount <= 0 || delay < 0 || step < 0) {\n    Notiflix.Notify.failure(` Please input correct values (>=0)`);\n    return;\n  }\n  position = 1;\n\n  setTimeout(() => {\n    createPromise(position, delay)\n      .then(({ position, delay }) => {\n        Notiflix.Notify.success(` Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        Notiflix.Notify.failure(` Rejected promise ${position} in ${delay}ms`);\n      });\n    intervalId = setInterval(() => {\n      if (position === amount) {\n        clearInterval(intervalId);\n        return;\n      }\n      position += 1;\n      delay += step;\n\n      createPromise(position, delay)\n        .then(({ position, delay }) => {\n          Notiflix.Notify.success(\n            ` Fulfilled promise ${position} in ${delay}ms`\n          );\n        })\n        .catch(({ position, delay }) => {\n          Notiflix.Notify.failure(\n            ` Rejected promise ${position} in ${delay}ms`\n          );\n        });\n    }, step);\n  }, delay);\n};\n\nrefs.createBtn.addEventListener('click', onCreateBtnClick);\n"],"names":["$7Y9D8","parcelRequire","$47d4ff9957288465$var$refs","delay","document","querySelector","step","amount","createBtn","$47d4ff9957288465$var$position","$47d4ff9957288465$var$delay","$47d4ff9957288465$var$step","$47d4ff9957288465$var$amount","$47d4ff9957288465$var$intervalId","$47d4ff9957288465$var$createPromise","position1","delay1","shouldResolve","Math","random","Promise","resolve","reject","position","addEventListener","event","preventDefault","Number","value","$parcel$interopDefault","Notify","failure","setTimeout","then","position2","delay2","success","catch","position3","delay3","setInterval","position4","delay4","position5","delay5","clearInterval"],"version":3,"file":"03-promises.ce392130.js.map"}